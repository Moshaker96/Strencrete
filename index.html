import { useState } from 'react';
import { Home, LayoutDashboard, AlertCircle, TrendingUp, Cpu, Gauge, Globe, Phone, Clock, Lightbulb, CheckCircle2, ChevronDown, ChevronUp } from 'lucide-react';

const HomePage = ({ setCurrentPage }) => {
    return (
        <>
            {/* Hero Section */}
            <section id="hero" className="relative hero-bg min-h-screen flex items-center justify-center px-4">
                <div className="absolute inset-0 hero-bg-overlay"></div>
                <div className="hero-logo-bg"></div>
                <div className="relative z-10 w-full flex flex-col items-center justify-center">
                    <div className="glass max-w-2xl w-full mx-auto text-center px-6 py-16 shadow-2xl rounded-3xl">
                        <img src="https://placehold.co/96x96" alt="Logo" className="w-24 h-24 mx-auto mb-6 rounded-xl shadow-lg border-4 border-white/40 bg-white/40"/>
                        <h1 className="text-4xl md:text-5xl font-extrabold mb-4 text-gray-900 drop-shadow">Empowering <span className="text-blue-600">Strength</span> Through Smart Monitoring</h1>
                        <p className="text-lg md:text-xl text-gray-800/90 mb-8 font-medium">
                            Strencrete delivers an innovative IoT solution for real-time monitoring of concrete strength and temperature, ensuring <span className="font-semibold text-blue-700">quality, safety, and efficiency</span> across your construction projects.
                        </p>
                        <button onClick={() => setCurrentPage('contact')} className="inline-block bg-blue-700 text-white font-semibold rounded-full px-10 py-3 shadow-lg hover:bg-blue-800 transition text-lg">Request a Demo</button>
                    </div>
                </div>
            </section>

            {/* About Section */}
            <section id="about" className="about-bg py-20 md:py-32">
                <div className="max-w-5xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                    <div className="text-white">
                        <h2 className="text-3xl md:text-4xl font-bold mb-4">About Strencrete</h2>
                        <p className="text-lg mb-5">
                            In the fast-paced world of construction, precision and reliability are paramount. Strencrete bridges the gap between traditional practices and modern technology. Our robust IoT platform provides <span className="font-semibold">real-time, actionable insights</span> into your concrete's curing process.
                        </p>
                        <p className="text-lg">
                            Our mission: Help project managers and engineers make data-driven decisions, reduce curing times, and guarantee the highest quality standards on every project.
                        </p>
                    </div>
                    <img src="https://placehold.co/600x420/1e40af/fff?text=Smart+Concrete" className="rounded-2xl shadow-lg" alt="Concrete Monitoring"/>
                </div>
            </section>

            {/* Solution Section */}
            <section id="solution" className="solution-bg py-20 md:py-32">
                <div className="max-w-6xl mx-auto px-6 text-center">
                    <h2 className="text-3xl md:text-4xl font-bold mb-4 text-white">A Better Way to Monitor</h2>
                    <p className="text-lg max-w-2xl mx-auto mb-12 text-gray-200">
                        Our IoT-enabled system provides a complete and accurate picture of your concrete's development, moving beyond traditional methods.
                    </p>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div className="card bg-white p-8 rounded-2xl shadow-xl border hover:shadow-2xl transition">
                            <div className="text-blue-600 text-5xl mb-3 flex justify-center">
                                <Cpu size={56} />
                            </div>
                            <h3 className="card-title text-xl font-semibold mb-2 text-gray-900">Smart Sensors</h3>
                            <p className="card-desc text-gray-600">Wireless, embedded sensors collect continuous data on temperature, humidity, and strength gain.</p>
                        </div>
                        <div className="card bg-white p-8 rounded-2xl shadow-xl border hover:shadow-2xl transition">
                            <div className="text-blue-600 text-5xl mb-3 flex justify-center">
                                <Globe size={56} />
                            </div>
                            <h3 className="card-title text-xl font-semibold mb-2 text-gray-900">Cloud Integration</h3>
                            <p className="card-desc text-gray-600">All sensor data is securely transmitted to our cloud platform, accessible from any device, anywhere.</p>
                        </div>
                        <div className="card bg-white p-8 rounded-2xl shadow-xl border hover:shadow-2xl transition">
                            <div className="text-blue-600 text-5xl mb-3 flex justify-center">
                                <AlertCircle size={56} />
                            </div>
                            <h3 className="card-title text-xl font-semibold mb-2 text-gray-900">Actionable Alerts</h3>
                            <p className="card-desc text-gray-600">Get instant notifications for anomalies or when concrete reaches critical strength milestones.</p>
                        </div>
                    </div>
                </div>
            </section>

            {/* Benefits Section */}
            <section id="benefits" className="benefits-bg py-20 md:py-32">
                <div className="max-w-6xl mx-auto px-6 text-center">
                    <h2 className="text-3xl md:text-4xl font-bold mb-4 text-white">Why Choose Strencrete?</h2>
                    <p className="text-lg max-w-2xl mx-auto mb-12 text-gray-200">
                        Our solution provides clear advantages that directly impact your project's bottom line and quality.
                    </p>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div className="card bg-white p-6 rounded-2xl shadow-md hover:shadow-xl border">
                            <div className="text-blue-600 text-4xl mb-3 flex justify-center">
                                <Clock size={48} />
                            </div>
                            <h3 className="text-lg font-semibold mb-1 text-gray-900">Time Savings</h3>
                            <p className="text-gray-600 text-sm">Reduce waiting times by knowing the exact moment concrete is ready.</p>
                        </div>
                        <div className="card bg-white p-6 rounded-2xl shadow-md hover:shadow-xl border">
                            <div className="text-blue-600 text-4xl mb-3 flex justify-center">
                                <CheckCircle2 size={48} />
                            </div>
                            <h3 className="text-lg font-semibold mb-1 text-gray-900">Increased Accuracy</h3>
                            <p className="text-gray-600 text-sm">Eliminate human error with precise, automated data collection.</p>
                        </div>
                        <div className="card bg-white p-6 rounded-2xl shadow-md hover:shadow-xl border">
                            <div className="text-blue-600 text-4xl mb-3 flex justify-center">
                                <TrendingUp size={48} />
                            </div>
                            <h3 className="text-lg font-semibold mb-1 text-gray-900">Enhanced Quality</h3>
                            <p className="text-gray-600 text-sm">Ensure concrete meets and exceeds specified strength and durability.</p>
                        </div>
                        <div className="card bg-white p-6 rounded-2xl shadow-md hover:shadow-xl border">
                            <div className="text-blue-600 text-4xl mb-3 flex justify-center">
                                <Gauge size={48} />
                            </div>
                            <h3 className="text-lg font-semibold mb-1 text-gray-900">Remote Access</h3>
                            <p className="text-gray-600 text-sm">Monitor all your projects from a single dashboard, from anywhere in the world.</p>
                        </div>
                    </div>
                </div>
            </section>

            {/* Contact Section */}
            <section id="contact" className="py-20 md:py-32 bg-gradient-to-b from-white to-blue-50">
                <div className="max-w-xl mx-auto px-6 text-center">
                    <h2 className="text-3xl md:text-4xl font-bold text-blue-900 mb-4">Ready to Build Stronger?</h2>
                    <p className="text-lg text-gray-700 max-w-2xl mx-auto mb-8">
                        Let's discuss how Strencrete can transform your construction projects.<br/>
                        <b>Contact us: <a href="mailto:info@strencrete.com" className="text-blue-700 underline">info@strencrete.com</a></b>
                    </p>
                </div>
            </section>
        </>
    );
};

const DashboardPage = () => {
    return (
        <div className="dashboard-bg min-h-screen">
            <section className="py-20 md:py-32">
                <div className="max-w-6xl mx-auto px-6 text-center">
                    <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Live Dashboard</h2>
                    <p className="text-lg text-gray-300 max-w-2xl mx-auto mb-12">
                        This is a placeholder for your live data, graphs, and monitoring tools.
                    </p>
                    <div className="bg-gray-800 rounded-2xl p-8 shadow-xl">
                        <h3 className="text-2xl font-semibold mb-4 text-white">Project Overview</h3>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 text-left">
                            <div className="bg-gray-700 p-6 rounded-lg text-white">
                                <p className="text-gray-400">Project Alpha</p>
                                <p className="text-xl font-bold">Curing: 80%</p>
                            </div>
                            <div className="bg-gray-700 p-6 rounded-lg text-white">
                                <p className="text-gray-400">Project Beta</p>
                                <p className="text-xl font-bold">Curing: 45%</p>
                            </div>
                            <div className="bg-gray-700 p-6 rounded-lg text-white">
                                <p className="text-gray-400">Project Gamma</p>
                                <p className="text-xl font-bold">Curing: 95%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    );
};

const App = () => {
    const [currentPage, setCurrentPage] = useState('home');
    const [isHomeDropdownOpen, setIsHomeDropdownOpen] = useState(false);

    // Function to handle link clicks within the dropdown
    const handleHomeLinkClick = (e, sectionId) => {
        e.preventDefault();
        setCurrentPage('home'); // Ensure we are on the home page first
        setIsHomeDropdownOpen(false); // Close the dropdown
        
        // Use a timeout to ensure the page has rendered before scrolling
        setTimeout(() => {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }, 100);
    };

    const renderPage = () => {
        switch (currentPage) {
            case 'home':
                return <HomePage setCurrentPage={setCurrentPage} />;
            case 'dashboard':
                return <DashboardPage />;
            default:
                return <HomePage setCurrentPage={setCurrentPage} />;
        }
    };

    return (
        <div className="bg-gray-50 text-gray-900 antialiased">
            <style jsx>{`
                body { font-family: 'Inter', sans-serif; }
                .hero-bg {
                    background:
                        linear-gradient(120deg, rgba(30,41,59,0.88) 0%, rgba(30,58,138,0.78) 100%),
                        url('https://placehold.co/1920x1080') center center / cover no-repeat;
                }
                .about-bg {
                    background:
                        linear-gradient(120deg, rgba(30,41,59,0.60) 0%, rgba(30,58,138,0.60) 100%),
                        url('https://placehold.co/1920x1080') center center / cover no-repeat;
                }
                .solution-bg {
                    background:
                        linear-gradient(120deg, rgba(30,41,59,0.58) 0%, rgba(30,58,138,0.58) 100%),
                        url('https://placehold.co/1920x1080') center center / cover no-repeat;
                }
                .benefits-bg {
                    background:
                        linear-gradient(120deg, rgba(30,41,59,0.7) 0%, rgba(30,58,138,0.8) 100%),
                        url('https://placehold.co/1920x1080') center center / cover no-repeat;
                }
                .hero-logo-bg {
                    position: absolute;
                    left: 50%;
                    top: 50%;
                    width: 600px;
                    height: 600px;
                    transform: translate(-50%, -50%);
                    background: url('https://placehold.co/600x600') center/contain no-repeat;
                    opacity: 0.10;
                    z-index: 1;
                    filter: blur(1px);
                    pointer-events: none;
                }
                @media (max-width: 768px) {
                  .hero-logo-bg {
                    width: 330px;
                    height: 330px;
                  }
                }
                .glass {
                  background: rgba(255,255,255,0.16);
                  border-radius: 1.5rem;
                  box-shadow: 0 10px 32px 0 rgba(31,38,135,0.20);
                  backdrop-filter: blur(12px);
                  -webkit-backdrop-filter: blur(12px);
                  border: 1.5px solid rgba(255,255,255,0.22);
                }
                .dashboard-bg {
                    background-color: #1f2937;
                    color: #e5e7eb;
                }
            `}</style>
            <nav className="bg-white/90 shadow-lg sticky top-0 z-50 backdrop-blur">
                <div className="max-w-7xl mx-auto flex items-center justify-between py-3 px-6">
                    <a href="#" onClick={() => setCurrentPage('home')} className="flex items-center space-x-3">
                        <img src="https://placehold.co/40x40" alt="Strencrete Logo" className="h-10 w-10 rounded-lg shadow"/>
                        <span className="font-bold text-2xl tracking-tight text-blue-900">Strencrete</span>
                    </a>
                    <div className="flex space-x-8 font-medium">
                        {/* Home Dropdown Menu */}
                        <div className="relative">
                            <button
                                onClick={() => setIsHomeDropdownOpen(!isHomeDropdownOpen)}
                                className="flex items-center space-x-2 hover:text-blue-700 transition"
                            >
                                <Home size={20} />
                                <span>Home</span>
                                {isHomeDropdownOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}
                            </button>
                            {isHomeDropdownOpen && (
                                <div className="absolute top-full mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50">
                                    <div className="py-1">
                                        <button
                                            onClick={(e) => handleHomeLinkClick(e, 'about')}
                                            className="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                        >
                                            About
                                        </button>
                                        <button
                                            onClick={(e) => handleHomeLinkClick(e, 'solution')}
                                            className="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                        >
                                            Solution
                                        </button>
                                        <button
                                            onClick={(e) => handleHomeLinkClick(e, 'benefits')}
                                            className="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                        >
                                            Benefits
                                        </button>
                                        <button
                                            onClick={(e) => handleHomeLinkClick(e, 'contact')}
                                            className="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                        >
                                            Contact
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Dashboard Button */}
                        <button onClick={() => setCurrentPage('dashboard')} className="flex items-center space-x-2 hover:text-blue-700 transition">
                            <LayoutDashboard size={20} />
                            <span>Dashboard</span>
                        </button>
                    </div>
                </div>
            </nav>

            {renderPage()}

            <footer className="bg-gray-900 text-gray-300 py-8">
                <div className="max-w-6xl mx-auto px-6 text-center text-sm">
                    &copy; 2025 Strencrete. All rights reserved. | <a href="mailto:info@strencrete.com" className="text-blue-500 hover:underline">info@strencrete.com</a>
                </div>
            </footer>
        </div>
    );
};

export default App;
